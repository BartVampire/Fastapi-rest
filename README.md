# üçΩÔ∏è –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ú–µ–Ω—é –¥–ª—è –†–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ –Ω–∞ FastAPI

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ú–µ–Ω—é –¥–ª—è –†–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤**! –≠—Ç–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–Ω—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤. –û–Ω–æ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ JWT, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ JWT**: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º access –∏ refresh —Ç–æ–∫–µ–Ω–æ–≤.
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: –£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ SQLAdmin.
- **PostgreSQL –∏ Redis**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker Compose.
- **–ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic**: –ü—Ä–æ—Å—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
- **–®–∞–±–ª–æ–Ω—ã Jinja2**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –º–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤.
- **Poetry**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

---

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.10+
- Docker –∏ Docker Compose
- [Poetry](https://python-poetry.org/)

### üê≥ –ó–∞–ø—É—Å–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker Compose

1. **–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**:
    ```bash
    git clone <—Å—Å—ã–ª–∫–∞_–Ω–∞_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π>
    cd <–Ω–∞–∑–≤–∞–Ω–∏–µ_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
    ```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`**:
   –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `app` —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
    ```env
    FASTAPI__DB__URL=postgresql+asyncpg://postgres:<–≤–∞—à_–ø–∞—Ä–æ–ª—å>@db:5432/fastapi_db
    POSTGRES_HOST=db
    POSTGRES_PASSWORD=<–≤–∞—à_–ø–∞—Ä–æ–ª—å>
    FASTAPI__FIRST__PEPPER=<—Å–µ–∫—Ä–µ—Ç_1>
    FASTAPI__SECOND__PEPPER=<—Å–µ–∫—Ä–µ—Ç_2>
    FASTAPI__THIRD__PEPPER=<—Å–µ–∫—Ä–µ—Ç_3>
    FASTAPI__ADMIN__SECRET_KEY=<—Å–µ–∫—Ä–µ—Ç_–¥–ª—è_–∞–¥–º–∏–Ω–∫–∏>
    FASTAPI__REDIS__HOST=redis
    FASTAPI__REDIS__PORT=6379
    FASTAPI__REDIS__DB=0
    FASTAPI__REDIS__PASSWORD=<–ø–∞—Ä–æ–ª—å_redis>
    ADMIN_USER_MODEL=app.models.User
    ADMIN_USER_MODEL_USERNAME_FIELD=username
    ADMIN_SECRET_KEY=<—Å–µ–∫—Ä–µ—Ç_–¥–ª—è_–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞>
    ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:
    ```bash
    docker-compose up --build
    ```

4. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:
    - **API**: [http://localhost:8000/docs](http://localhost:8000/docs)
    - **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: [http://localhost:8000/project_d_admin](http://localhost:8000/project_d_admin)
    - **–ú–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤**: [http://localhost:8000/?restaurant_uuid=UUID]()
---

## üóÉÔ∏è –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Alembic**:
    ```bash
    alembic init alembic
    ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏**:
    ```bash
    alembic revision --autogenerate -m "Initial migration"
    ```

3. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π**:
    ```bash
    alembic upgrade head
    ```

## üõ†Ô∏è –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**:
    ```bash
    poetry install
    ```
2. **–ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ**:
    ```bash
    poetry poetry run uvicorn app.main:main_app --reload --host <–≤–∞—à_—Ö–æ—Å—Ç> --port <–≤–∞—à_–ø–æ—Ä—Ç>
    ```
---

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π              | –û–ø–∏—Å–∞–Ω–∏–µ                                |
|----------------------------------|-----------------------------------------|
| `FASTAPI__DB__URL`               | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö           |
| `POSTGRES_HOST`                  | –•–æ—Å—Ç PostgreSQL                         |
| `POSTGRES_PASSWORD`              | –ü–∞—Ä–æ–ª—å PostgreSQL                       |
| `FASTAPI__FIRST__PEPPER`         | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (pepper) –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è |
| `FASTAPI__SECOND__PEPPER`        | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (pepper) –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è |
| `FASTAPI__THIRD__PEPPER`         | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (pepper) –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è |
| `FASTAPI__ADMIN__SECRET_KEY`     | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ SQLADMIN     |
| `FASTAPI__REDIS__HOST`           | –•–æ—Å—Ç Redis                              |
| `FASTAPI__REDIS__PORT`           | –ü–æ—Ä—Ç Redis                              |
| `FASTAPI__REDIS__DB`             | –ò–Ω–¥–µ–∫—Å –±–∞–∑—ã Redis                       |
| `FASTAPI__REDIS__PASSWORD`       | –ü–∞—Ä–æ–ª—å Redis                            |
| `ADMIN_USER_MODEL`               | –ü—É—Ç—å –∫ –º–æ–¥–µ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞            |
| `ADMIN_USER_MODEL_USERNAME_FIELD`| –ü–æ–ª–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –º–æ–¥–µ–ª–∏        |
| `ADMIN_SECRET_KEY`               | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞           |
